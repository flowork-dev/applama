<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Tele Ops | Studio</title>

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>

    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;800&family=Rajdhani:wght@500;700;900&display=swap" rel="stylesheet">

    <style>
        :root {
            --bg-core: #050505;
            --panel-bg: #0a0b10;
            --accent: #54d7f6;
            --accent-sec: #706bf3;
        }

        body {
            background-color: var(--bg-core);
            color: #e0f0ff;
            font-family: 'JetBrains Mono', monospace;
            overflow: hidden;
            overscroll-behavior: none;
            -webkit-tap-highlight-color: transparent;
        }

        .font-hud { font-family: 'Rajdhani', sans-serif; }

        /* Custom Scrollbar */
        .custom-scroll::-webkit-scrollbar { width: 4px; }
        .custom-scroll::-webkit-scrollbar-track { background: transparent; }
        .custom-scroll::-webkit-scrollbar-thumb { background: #333; border-radius: 4px; }
        .custom-scroll::-webkit-scrollbar-thumb:hover { background: var(--accent); }

        textarea { resize: none !important; }

        /* PROMPTER OVERLAY (FIXED) */
        #ui-prompter {
            display: none;
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            width: 100vw; height: 100vh;
            background: #000000;
            z-index: 99999 !important;
            flex-direction: column;
        }

        #ui-prompter.active { display: flex !important; }

        /* CSS FIX untuk range input */
        input[type=range] {
            -webkit-appearance: none;
            appearance: none;
            background: transparent;
        }
        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            height: 16px; width: 16px; border-radius: 50%;
            background: var(--accent); margin-top: -6px; cursor: pointer;
        }
        input[type=range]::-webkit-slider-runnable-track {
            width: 100%; height: 4px; background: #333; border-radius: 2px;
        }
    </style>
</head>
<body class="h-screen flex flex-col bg-[#050505]">

    <div class="shrink-0 h-14 bg-[#0a0b10] border-b border-[#222] flex items-center justify-between px-4 z-30 shadow-lg">
        <div class="flex items-center gap-3">
            <div class="w-8 h-8 rounded bg-[#1a1b2e] border border-[#3a3962] flex items-center justify-center">
                <i data-lucide="monitor-play" class="text-[#54d7f6] w-4 h-4"></i>
            </div>
            <div>
                <h1 class="font-bold text-lg font-hud tracking-[0.1em] text-white leading-none">TELE<span class="text-[#54d7f6]">OPS</span></h1>
                <span class="text-[9px] font-bold text-gray-500 tracking-widest">STUDIO V2</span>
            </div>
        </div>
        <div class="flex items-center gap-2">
            <button onclick="TeleEngine.loadDemo()" class="text-[10px] font-bold text-gray-400 bg-[#1a1b2e] px-3 py-1.5 rounded border border-[#3a3962] hover:text-white hover:border-[#54d7f6] transition">DEMO</button>
            <button onclick="TeleEngine.clearText()" class="text-[10px] font-bold text-red-400 bg-red-900/10 px-3 py-1.5 rounded border border-red-900/30 hover:bg-red-900/30 transition">CLR</button>
        </div>
    </div>

    <div class="flex-1 flex flex-col relative overflow-hidden" id="ui-studio">

        <div class="flex-1 bg-[#08080a] relative flex flex-col min-h-[40%]">
            <div class="absolute top-0 left-0 w-full p-2 px-3 bg-gradient-to-b from-black/90 to-transparent z-10 flex justify-between items-center pointer-events-none">
                <span class="text-[9px] font-bold text-[#54d7f6] bg-[#54d7f6]/10 px-2 py-0.5 rounded border border-[#54d7f6]/30">SCRIPT INPUT</span>
            </div>
            <textarea id="script-input"
                class="w-full h-full bg-transparent text-gray-200 p-4 pt-10 outline-none font-mono text-sm leading-relaxed placeholder-gray-700 custom-scroll focus:bg-[#0c0d12] transition-colors"
                placeholder="Paste naskah konten lo di sini... atau klik DEMO diatas."
                enterkeyhint="done"></textarea>
        </div>

        <div class="bg-[#0a0b10] border-t border-[#222] p-4 pb-24 overflow-y-auto custom-scroll shrink-0 max-h-[50%]">

            <div class="grid grid-cols-1 gap-5">

                <div class="space-y-1">
                    <div class="flex justify-between text-[10px] font-bold text-gray-400 tracking-widest">
                        <span>SCROLL SPEED</span>
                        <span id="speed-val" class="text-[#54d7f6]">3</span>
                    </div>
                    <div class="flex items-center gap-3 bg-[#12131c] p-2 rounded-lg border border-[#222]">
                        <i data-lucide="turtle" class="w-4 h-4 text-gray-600"></i>
                        <input type="range" id="speed-range" min="1" max="20" value="3" class="flex-1">
                        <i data-lucide="rabbit" class="w-4 h-4 text-gray-600"></i>
                    </div>
                </div>

                <div class="space-y-1">
                    <div class="flex justify-between text-[10px] font-bold text-gray-400 tracking-widest">
                        <span>FONT SIZE</span>
                        <span id="font-val" class="text-[#706bf3]">40px</span>
                    </div>
                    <div class="flex items-center gap-3 bg-[#12131c] p-2 rounded-lg border border-[#222]">
                        <span class="text-xs font-bold text-gray-600">Aa</span>
                        <input type="range" id="font-range" min="20" max="120" value="40" class="flex-1" style="accent-color: #706bf3;">
                        <span class="text-lg font-bold text-gray-600">Aa</span>
                    </div>
                </div>

                <div class="flex items-center justify-between p-2 px-3 bg-[#12131c] rounded-lg border border-[#222]">
                    <div class="flex items-center gap-2">
                        <i data-lucide="flip-horizontal" class="w-4 h-4 text-gray-400"></i>
                        <span class="text-[10px] font-bold text-gray-300">MIRROR MODE</span>
                    </div>
                    <label class="relative inline-flex items-center cursor-pointer">
                        <input type="checkbox" id="mirror-check" class="sr-only peer">
                        <div class="w-8 h-4 bg-gray-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-3 after:w-3 after:transition-all peer-checked:bg-[#54d7f6]"></div>
                    </label>
                </div>

                <button onclick="TeleEngine.startPrompter()" class="w-full py-4 bg-gradient-to-r from-[#54d7f6] to-[#706bf3] hover:from-[#4bc3e0] hover:to-[#5e59d0] text-[#0f1014] font-black font-hud tracking-[0.2em] rounded-xl shadow-[0_0_20px_rgba(84,215,246,0.3)] active:scale-95 transition-all flex items-center justify-center gap-3 text-lg mt-2">
                    <i data-lucide="play" class="w-6 h-6 fill-current"></i> MULAI BACA
                </button>

            </div>

            <div id="global-footer" class="mt-8 pt-4 border-t border-[#222]"></div>

        </div>
    </div>

    <div id="ui-prompter">

        <div id="scroll-container" class="flex-1 w-full h-full overflow-hidden relative cursor-pointer bg-black" onclick="TeleEngine.togglePlay()">

            <div class="absolute top-1/2 left-0 w-full h-20 -translate-y-1/2 border-y-2 border-[#54d7f6]/40 bg-[#54d7f6]/5 z-10 pointer-events-none flex items-center justify-between px-4">
                <i data-lucide="chevron-right" class="text-[#54d7f6] w-6 h-6 opacity-80"></i>
                <i data-lucide="chevron-left" class="text-[#54d7f6] w-6 h-6 opacity-80"></i>
            </div>

            <div id="tele-content" class="px-6 md:px-32 py-[50vh] text-center font-bold text-white leading-normal origin-center select-none pb-[100vh]">
                </div>
        </div>

        <div class="absolute bottom-8 left-0 w-full text-center pointer-events-none z-40 opacity-40">
            <span class="text-[10px] font-mono text-gray-500 tracking-[0.3em] uppercase">Recording Mode // Flowork</span>
        </div>

        <div class="absolute bottom-36 left-1/2 -translate-x-1/2 flex items-center gap-3 p-2 bg-[#171925]/90 backdrop-blur border border-[#3a3962] rounded-2xl shadow-2xl z-50">

            <button onclick="TeleEngine.stopPrompter()" class="p-3 hover:bg-red-500/20 text-red-400 rounded-xl transition-colors active:scale-90">
                <i data-lucide="x" class="w-6 h-6"></i>
            </button>

            <div class="w-[1px] h-6 bg-gray-700"></div>

            <button onclick="TeleEngine.resetPosition()" class="p-3 hover:bg-white/10 text-white rounded-xl transition-colors active:scale-90">
                <i data-lucide="rotate-ccw" class="w-6 h-6"></i>
            </button>

            <button onclick="TeleEngine.togglePlay()" id="btn-toggle-play" class="p-4 bg-[#54d7f6] text-black rounded-xl transition-colors shadow-lg active:scale-95">
                <i data-lucide="pause" class="w-6 h-6 fill-current"></i>
            </button>

            <div class="flex flex-col items-center px-2 w-24">
                <input type="range" id="fly-speed" min="1" max="20" class="w-full h-1 bg-gray-600 rounded-lg appearance-none cursor-pointer accent-[#54d7f6]">
                <span class="text-[8px] font-bold text-gray-400 mt-1">SPEED</span>
            </div>
        </div>
    </div>

    <div id="toast-container" class="fixed bottom-10 left-1/2 -translate-x-1/2 z-[60] pointer-events-none toast-enter">
        <div class="bg-[#1f2233] border border-[#54d7f6]/30 text-white px-4 py-3 rounded shadow-2xl flex items-center gap-3">
            <i data-lucide="info" class="text-[#54d7f6] w-5 h-5"></i>
            <span id="toast-message" class="text-xs font-bold font-hud tracking-widest">NOTIFICATION</span>
        </div>
    </div>

    <script>
        // 1. FOOTER INJECTOR
        async function loadFooter() {
            try {
                const response = await fetch('/assets/lander/footer.html');
                if (!response.ok) throw new Error('Footer not found');
                let html = await response.text();
                const realYear = new Date().getFullYear();
                html = html.replace('{YEAR}', realYear);
                document.getElementById('global-footer').innerHTML = html;
                if(window.lucide) window.lucide.createIcons();
            } catch (e) {
                console.log("Footer fallback active");
                document.getElementById('global-footer').innerHTML =
                    `<div class="p-6 text-center text-gray-600 font-mono text-[10px]">Â© ${new Date().getFullYear()} FLOWORK</div>`;
            }
        }
        loadFooter();

        // 2. TOAST SYSTEM
        function showToast(msg) {
            const container = document.getElementById('toast-container');
            const message = document.getElementById('toast-message');
            message.innerText = msg;
            container.classList.add('toast-active');
            container.classList.remove('toast-enter');
            setTimeout(() => {
                container.classList.remove('toast-active');
                container.classList.add('toast-enter');
            }, 2000);
        }

        // 3. TELE ENGINE
        const TeleEngine = {
            state: {
                isPlaying: false,
                speed: 3,
                fontSize: 40,
                isMirrored: false,
                scrollInterval: null,
                currentScroll: 0
            },

            init() {
                console.log("TeleEngine Initializing...");

                const speedRange = document.getElementById('speed-range');
                const flySpeed = document.getElementById('fly-speed');
                const fontRange = document.getElementById('font-range');
                const mirrorCheck = document.getElementById('mirror-check');

                if(speedRange) speedRange.addEventListener('input', (e) => this.updateSpeed(e.target.value));
                if(flySpeed) flySpeed.addEventListener('input', (e) => this.updateSpeed(e.target.value));

                if(fontRange) {
                    fontRange.addEventListener('input', (e) => {
                        this.state.fontSize = e.target.value;
                        document.getElementById('font-val').innerText = e.target.value + 'px';
                        const content = document.getElementById('tele-content');
                        if(content) content.style.fontSize = e.target.value + 'px';
                    });
                }

                if(mirrorCheck) {
                    mirrorCheck.addEventListener('change', (e) => {
                        this.state.isMirrored = e.target.checked;
                        this.applyMirror();
                    });
                }

                if(window.lucide) lucide.createIcons();
            },

            updateSpeed(val) {
                this.state.speed = parseInt(val);
                const sv = document.getElementById('speed-val');
                const sr = document.getElementById('speed-range');
                const fs = document.getElementById('fly-speed');

                if(sv) sv.innerText = val;
                if(sr) sr.value = val;
                if(fs) fs.value = val;
            },

            loadDemo() {
                // REALISTIC DEMO SCRIPT (Bahasa Indonesia)
                const demoText =
`HALO GUYS, WELCOME BACK!

Di video kali ini, gue bakal bahas 3 rahasia konten viral yang jarang orang tau.

Poin pertama: Hook.
3 detik pertama itu krusial banget. Lo harus bisa bikin orang berhenti scroll.

Poin kedua: Value.
Jangan cuma bikin konten sampah. Kasih sesuatu yang berguna. Edukasi, hiburan, atau motivasi.

Poin ketiga: CTA.
Jangan lupa ajak mereka buat like dan subscribe channel ini sekarang juga!

(Tahan senyum ke kamera...)
Oke, segitu dulu video hari ini.
Sampai jumpa di video selanjutnya.
Bye!`;
                document.getElementById('script-input').value = demoText;
                showToast("DEMO SCRIPT LOADED");
            },

            clearText() {
                document.getElementById('script-input').value = "";
            },

            applyMirror() {
                const content = document.getElementById('tele-content');
                if(!content) return;
                content.style.transform = this.state.isMirrored ? "scaleX(-1)" : "scaleX(1)";
            },

            startPrompter() {
                const text = document.getElementById('script-input').value;
                if (!text || !text.trim()) {
                    showToast("SCRIPT KOSONG BOS!");
                    return;
                }

                const formatted = text.replace(/\n/g, '<br>');
                const contentDiv = document.getElementById('tele-content');
                contentDiv.innerHTML = formatted;
                contentDiv.style.fontSize = this.state.fontSize + 'px';
                this.applyMirror();

                // Force Display
                document.getElementById('ui-prompter').classList.add('active');

                // Reset Position
                this.state.currentScroll = 0;
                document.getElementById('scroll-container').scrollTop = 0;

                // Auto Play
                this.state.isPlaying = true;
                this.updatePlayButton();
                this.runScrollLoop();
            },

            stopPrompter() {
                this.state.isPlaying = false;
                cancelAnimationFrame(this.state.scrollInterval);
                document.getElementById('ui-prompter').classList.remove('active');
            },

            togglePlay() {
                this.state.isPlaying = !this.state.isPlaying;
                this.updatePlayButton();
                if (this.state.isPlaying) this.runScrollLoop();
                else cancelAnimationFrame(this.state.scrollInterval);
            },

            updatePlayButton() {
                const btn = document.getElementById('btn-toggle-play');
                if(!btn) return;
                if(this.state.isPlaying) {
                    btn.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-pause w-6 h-6"><rect width="4" height="16" x="6" y="4"/><rect width="4" height="16" x="14" y="4"/></svg>`;
                } else {
                    btn.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-play w-6 h-6"><polygon points="5 3 19 12 5 21 5 3"/></svg>`;
                }
            },

            resetPosition() {
                const container = document.getElementById('scroll-container');
                container.scrollTo({ top: 0, behavior: 'smooth' });
                this.state.currentScroll = 0;
            },

            runScrollLoop() {
                const scrollStep = () => {
                    if (!this.state.isPlaying) return;

                    const container = document.getElementById('scroll-container');
                    const pixels = this.state.speed * 0.2; // Speed factor

                    this.state.currentScroll += pixels;
                    container.scrollTop = this.state.currentScroll;

                    // Stop if reached end
                    if (container.scrollTop + container.clientHeight >= container.scrollHeight - 50) {
                        this.state.isPlaying = false;
                        this.updatePlayButton();
                        return;
                    }

                    this.state.scrollInterval = requestAnimationFrame(scrollStep);
                };
                this.state.scrollInterval = requestAnimationFrame(scrollStep);
            }
        };

        // Initialize when DOM is ready
        window.onload = () => {
            TeleEngine.init();
        };

    </script>
</body>
</html>